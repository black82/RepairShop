<div class="container-body">
  <div class="title-container">
    <p class="title-form"> Client <span
      style="color: lightcoral"> {{client.typeClient ? client.companyName : client?.name + ' ' + client.family}} </span>
    </p>
  </div>
  <div class="row-container">
    <div class="row-1">
      <div class="container-1-content">
        <div class="container-2-content">
          <span class="input-title">
            <fa-icon [icon]="usertag"
                     class="icon-normal-single"></fa-icon>Client:<span
            style="color: lightcoral;font-size: 20px">{{client.typeClient ? client.companyName : client?.name + ' ' + client.family}}</span></span>
          <span *ngIf="client?.typeClient" class="input-title">
            <fa-icon [icon]="usertag"
                     class="icon-normal-single"></fa-icon>Client Iva: <span
            style="color: lightcoral;font-size: 20px">{{client.ivaCompany}}</span></span>
          <span *ngIf="client?.typeClient" class="input-title">
            <fa-icon
              [icon]="usertag" class="icon-normal-single"></fa-icon>Client SDI:<span
            style="color: lightcoral;font-size: 20px"> {{client.sdiCompany}}</span></span>
          <span class="input-title"><fa-icon [icon]="phone"
                                             class="icon-normal-single"></fa-icon> Phone Number:
            <span style="color: lightcoral;font-size: 20px">{{client?.telephone_number}}</span></span>
          <span *ngIf="client.telephone_number_second" class="input-title"><fa-icon [icon]="phone"
                                                                                    class="icon-normal-single"></fa-icon>Second Phone Number:<span
            style="color: lightcoral;font-size: 20px">{{client?.telephone_number_second}}</span></span>
          <span class="input-title"><fa-icon [icon]="email" class="icon-normal-single"></fa-icon> Email:<span
            style="color: lightcoral;font-size: 20px">{{client?.email}}</span></span>
          <span class="input-title"><fa-icon [icon]="address" class="icon-normal-single"></fa-icon> Address:<span
            style="color: lightcoral;font-size: 20px">{{client?.address}}</span></span>
        </div>
      </div>
      <div *ngFor="let element of devices_element; let index" class="toggle-container-1">
        <div (click)="showElement(element)" class="toggle-title">
          <span [style]="element.visible ?{'color': 'lightcoral'} : {'color': '#1ABC9C'}" class="title-toggle"><fa-icon
            [icon]="usertag"></fa-icon>
            {{client?.name}} - <fa-icon [icon]="mobile"></fa-icon>
            {{element.divice.model}}<span *ngIf="!element.divice.rightNowInRepair">(CLOSET  REPAIR)</span><span
              *ngIf="element.divice.rightNowInRepair">(OPEN REPAIR)</span></span></div>
        <div *ngIf="element.visible && device_show" class="show">
          <ul class="border">
            <li>
              <ol class="input-title">
                <fa-icon [icon]="mobile" class="icon-normal-single"></fa-icon>
                Model:<span style="color: lightcoral;font-size: 20px"> {{element.divice?.model}}</span></ol>
              <ol class="input-title">
                <fa-icon [icon]="used" class="icon-normal-single"></fa-icon>
                State of use:<span style="color: lightcoral;font-size: 20px"> {{element.divice?.state_of_use}}</span>
              </ol>
              <ol class="input-title">
                <fa-icon [icon]="code" class="icon-normal-single"></fa-icon>
                IMEI&&SN:<span style="color: lightcoral;font-size: 20px"> {{element.divice?.imei}}</span></ol>
              <ol class="input-title">
                <fa-icon [icon]="password" class="icon-normal-single"></fa-icon>
                Code Device:<span style="color: lightcoral;font-size: 20px"> {{element.divice?.code_device}}</span></ol>
              <ol class="input-title">
                <fa-icon [icon]="password" class="icon-normal-single"></fa-icon>
                Password Device:<span
                style="color: lightcoral;font-size: 20px"> {{element.divice?.password_device}}</span></ol>
              <ol class="input-title">
                <fa-icon [icon]="accessory" class="icon-normal-single"></fa-icon>
                Accessory:<span style="color: lightcoral;font-size: 20px"> {{element.divice?.accessory}}</span></ol>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="row-2">

      <div *ngFor="let item of repairs_element; let i= index" class="toggle-container-2">
        <div (click)="showElementRepair(item)" *ngIf="show_repair" class="toggle-title"><span
          [style]="item.visible ?{'color': 'lightcoral'} : {'color': '#1ABC9C'}"
          class="title-toggle">
          <fa-icon [icon]="date"></fa-icon>
          {{item?.repair_elemnt.date_to_enter | date:'mediumDate'}}
          <span *ngIf="!item.repair_elemnt.nowInRepair">(CLOSET  REPAIR)</span><span
          *ngIf="item.repair_elemnt.nowInRepair">(OPEN REPAIR)</span> </span></div>

        <div *ngIf="item.visible&&show_repair">
          <div class="border-container show">
            <ul class="border">
              <ol class="input-title">
                <fa-icon [icon]="cogs" class="icon-normal-single"></fa-icon>
                <strong> Repair Id:<span
                  style="color: lightcoral;font-size: 20px">{{item.repair_elemnt?.repair_Id}}</span></strong></ol>
              <ol class="input-title">
                <fa-icon class="icon-normal-single"
                         [icon]="date"></fa-icon>
                Date to enter:<span
                style="color: lightcoral;font-size: 20px"> {{item.repair_elemnt?.date_to_enter | date:'mediumDate'}}</span>
              </ol>
              <ol class="input-title">
                <fa-icon [icon]="cogs" class="icon-normal-single"></fa-icon>
                Defect:<span style="color: lightcoral;font-size: 20px">{{item.repair_elemnt?.defect}}</span></ol>
              <ol class="input-title">
                <fa-icon class="icon-normal-single"
                         [icon]="money"></fa-icon>
                Deposit:<span style="color: lightcoral;font-size: 20px"> {{item.repair_elemnt?.deposit}}</span></ol>
              <ol class="input-title">
                <fa-icon [icon]="money" class="icon-normal-single"></fa-icon>
                Price:<span style="color: lightcoral;font-size: 20px">{{item.repair_elemnt?.price}}</span></ol>
              <ol class="input-title">
                <fa-icon class="icon-normal-single"
                         [icon]="date"></fa-icon>
                Return Date:<span
                style="color: lightcoral;font-size: 20px"> {{item.repair_elemnt?.output_date | date:'mediumDate'}}</span>
              </ol>
              <ol class="input-title">
                <fa-icon class="icon-normal-single"
                         [icon]="work"></fa-icon>
                Work done: <span style="color: lightcoral;font-size: 20px">{{item.repair_elemnt?.work_don}}</span></ol>
              <ol class="input-title">
                <fa-icon class="icon-normal-single"
                         [icon]="chip"></fa-icon>
                Parts replaced:<span
                style="color: lightcoral;font-size: 20px"> {{item.repair_elemnt?.parts_replaced}}</span></ol>
            </ul>
            <div class="accordion">
              <div>
                <input class="accordion__input" id="section1" name="example_accordion" type="radio">
                <label class="accordion__label" for="section1">
                  <a class="input-title acortion-title">
                    <fa-icon [icon]="test_meteor" class="icon-test-tile"></fa-icon>
                    Teste non pasate in intrata
                  </a>
                </label>
                <div class="accordion__content">
                  <p>
                  <p *ngIf="item.test_input.length===0" class="input-title">
                    <fa-icon [icon]="test_meteor" class="icon-test-tile"></fa-icon>
                    Il tuo dispositivo ha superato con successo tutti i nostri
                    test di ingresso!!!
                  </p>
                  <div *ngIf="item.test_input.length>0" class="test-enter">
                    <p class="input-title">
                      <fa-icon [icon]="test_meteor" class="icon-test-tile"></fa-icon>
                      Teste non pasate in intrata
                    </p>
                    <div class="test-input-container">

                      <div *ngFor="let test_input of item.test_input" class="input-title">
                        <fa-icon [icon]="test_minus" class="test-icon"></fa-icon>
                        {{test_input}}</div>
                    </div>
                  </div>
                </div>
              </div>
              <div>
                <input class="accordion__input" id="section2" name="example_accordion" type="radio">
                <label class="accordion__label" for="section2">
                  <a class="input-title acortion-title">
                    <fa-icon [icon]="test_meteor" class="icon-test-tile"></fa-icon>
                    Teste non pasate in uscita
                  </a>
                </label>
                <div class="accordion__content">
                  <p *ngIf="client.device[0].rightNowInRepair" class="input-title">
                    <fa-icon [icon]="test_meteor" class="icon-test-tile icon-normal-single"></fa-icon>
                    Dispozitivo e anqora in reparazione!!!
                  </p>
                  <div *ngIf="!client.device[0].rightNowInRepair" class="test-output">
                    <p *ngIf="item.test_output.length===0" class="input-title">
                      <fa-icon [icon]="test_meteor" class="icon-test-tile"></fa-icon>
                      Il tuo dispositivo ha superato tutti test di Uscita!!!
                    </p>


                    <div *ngIf="!client.device[0].rightNowInRepair" class="test-output-container">
                      <div *ngFor="let test_output of item.test_output" class="input-title">
                        <fa-icon [icon]="test_minus" class="test-icon icon-normal-single"></fa-icon>
                        {{test_output}}</div>
                    </div>
                  </div>
                </div>
              </div>
              <div>
                <input class="accordion__input" id="section3" name="example_accordion" type="radio">
                <label class="accordion__label" for="section3">
                  <a class="input-title acortion-title">
                    <fa-icon [icon]="text" class="icon-test-tile"></fa-icon>
                    Note:
                  </a>
                </label>
                <div class="accordion__content">
                  <div>
                  </div>
                  <div class="note-container">
                    <div class="note-border">
                      <p class=" input-title note">{{item.repair_elemnt?.note}}</p>
                      <p class=" input-title note">{{item.repair_elemnt?.noteOutput}}</p>
                    </div>
                  </div>
                </div>
              </div>
              <div>
                <input class="accordion__input" id="section4" name="example_accordion" type="radio">
                <label class="accordion__label" for="section4">
                  <a class="input-title acortion-title">
                    <fa-icon [icon]="userStaff" class="icon-test-tile"></fa-icon>
                    Staff Users who Administered this Case
                  </a>
                </label>
                <div class="accordion__content">
                  <div>
                  </div>
                  <div class="note-container">
                    <div class="note-border">
                      <p *ngIf="item.repair_elemnt.createUserRepair" class=" input-title note">
                        <fa-icon [icon]="userStaff" class="icon-normal-single"></fa-icon>
                        Staff User Create Repair
                        : <span (click)="showStaffUser(item.repair_elemnt.createUserRepair)" class="user-staff"
                                tooltip="Click for Info">{{item.repair_elemnt.createUserRepair}}</span>
                      </p>
                      <p *ngIf="item.repair_elemnt.lastModifiedRepair" class=" input-title note">
                        <fa-icon [icon]="userStaff" class="icon-normal-single"></fa-icon>
                        Staff User Last Modified Repair
                        : <span (click)="showStaffUser(item.repair_elemnt.lastModifiedRepair)" class="user-staff"
                                tooltip="Click for Info">{{item.repair_elemnt.lastModifiedRepair}}</span></p>
                      <p *ngIf="item.repair_elemnt.closeUserRepair" class=" input-title note">
                        <fa-icon [icon]="userStaff" class="icon-normal-single"></fa-icon>
                        Staff User Close Repair
                        : <span (click)="showStaffUser(item.repair_elemnt.closeUserRepair)" class="user-staff"
                                tooltip="Click for Info">{{item.repair_elemnt.closeUserRepair}}</span>
                      </p>
                      <p *ngIf="client.createUser" class=" input-title note">
                        <fa-icon [icon]="userStaff" class="icon-normal-single"></fa-icon>
                        Staff User Create Client : <span (click)="showStaffUser(client.createUser)"
                                                         class="user-staff"
                                                         tooltip="Click for Info">{{client.createUser}}</span></p>
                      <p *ngIf="client.lastModified" class=" input-title note">
                        <fa-icon [icon]="userStaff" class="icon-normal-single"></fa-icon>
                        Staff User Last Modified Client :
                        <span (click)="showStaffUser(client.lastModified)" class="user-staff"
                              tooltip="Click for Info">{{client.lastModified}}</span></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <app-email-modal [callerServiceType]="'update'"></app-email-modal>
  <mat-expansion-panel *ngIf="show_document">
    <mat-expansion-panel-header>
      <fa-icon [icon]="images_icon"></fa-icon>
      <p>Images To Repair & Invoice</p>
    </mat-expansion-panel-header>
    <ng-template matExpansionPanelContent>
      <div class="row-container">
        <div class="foto-enter-device row-1">
          <div>
            <a (click)="invoice_Update(1)" class="edit button "><span>Aggiornamento Fattura</span></a>
            <div *ngIf="repair_fileStorage?.invoiceToEnterDeviceToRepair"
                 class="link-invoice-enter ">
              <a (click)="open_popup(repair_fileStorage.invoiceToEnterDeviceToRepair)"
                 class="link-invoice">Invoice
                to Open Repair</a>
            </div>

            <div *ngIf="repair_fileStorage.fotoEnterDevice && repair_fileStorage.fotoEnterDevice.length > 0"
                 class="image-input">
              <ul *ngFor="let images of repair_fileStorage.fotoEnterDevice; let i =index">
                <li (click)="zoum($event,i);" class="image-content">
                  <img [class]="i+'-image'" alt="" class="image-content"
                       id="normal-zoom"
                       src="{{'data:image/jpeg;base64,'+images.fotoBase64}}">
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="row-2">
          <a (click)="invoice_Update(2)" class="edit button "><span>Aggiornamento Fattura</span></a>
          <div *ngIf="repair_fileStorage.invoiceToExitDeviceToRepair"
               class="link-invoice-enter">
            <a (click)="open_popup(repair_fileStorage.invoiceToExitDeviceToRepair)"
               class="link-invoice">Invoice
              to Closet Repair</a>

            <div *ngIf="repair_fileStorage?.fotoExitDevice?.length > 0" class="foto-out-device">
              <ul *ngFor=" let images of repair_fileStorage?.fotoExitDevice;let i =index">
                <li (click)="zoum($event,(i+100));" class="image-content">
                  <img [class]="(i+100)+'-image'" alt="" class="image-content"
                       id="normal-zoom1"
                       src="{{'data:image/jpeg;base64,'+images.fotoBase64}}"></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </mat-expansion-panel>

</div>
